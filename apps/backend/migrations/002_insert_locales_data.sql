-- ============================================================
-- Migration 002: Localesテーブルへのサンプルデータ挿入
-- ============================================================
-- 目的: 日本語と英語の言語データを登録
-- 作成日: 2026-02-10
-- ============================================================

-- ============================================================
-- 💡 INSERTとは?
-- ============================================================
-- INSERT INTO = テーブルに新しいデータを追加するSQL文
--
-- 基本構文:
-- INSERT INTO テーブル名 (カラム1, カラム2, ...) 
-- VALUES (値1, 値2, ...);
--
-- 💡 指定しないカラム:
-- - locale_id → SERIAL型なので自動採番される
-- - created_at → DEFAULT NOW()なので自動設定される
-- ============================================================

-- ============================================================
-- 1. 日本語を登録（デフォルト言語）
-- ============================================================
INSERT INTO locales (code, name, is_default, is_active) 
VALUES (
    'ja',           -- code: 日本語の言語コード（ISO 639-1）
    'Japanese',     -- name: 日本語の英語表記
    TRUE,           -- is_default: デフォルト言語に設定
    TRUE            -- is_active: 有効
);

-- 💡 なぜ日本語をデフォルトに?
-- - このブログは主に日本語でコンテンツを書くため
-- - ユーザーが言語を指定しない場合、日本語で表示される

-- ============================================================
-- 2. 英語を登録
-- ============================================================
INSERT INTO locales (code, name, is_default, is_active) 
VALUES (
    'en',           -- code: 英語の言語コード（ISO 639-1）
    'English',      -- name: 英語の英語表記
    FALSE,          -- is_default: デフォルトではない
    TRUE            -- is_active: 有効
);

-- 💡 なぜ英語も登録?
-- - 海外の読者にもコンテンツを提供するため
-- - エンジニアの多くは英語でも情報を検索するため

-- ============================================================
-- 💡 実行後の確認方法
-- ============================================================
-- 以下のSQLで登録したデータを確認できます:
--
-- SELECT * FROM locales;
--
-- 期待される結果:
-- locale_id | code | name     | is_default | is_active | created_at
-- ----------|------|----------|------------|-----------|---------------------------
-- 1         | ja   | Japanese | true       | true      | 2026-02-10 10:30:00+09:00
-- 2         | en   | English  | false      | true      | 2026-02-10 10:30:05+09:00
-- ============================================================

-- ============================================================
-- 💡 将来の拡張例
-- ============================================================
-- 他の言語を追加する場合:
--
-- -- 中国語（簡体字）
-- INSERT INTO locales (code, name, is_default, is_active) 
-- VALUES ('zh', 'Chinese', FALSE, TRUE);
--
-- -- 韓国語
-- INSERT INTO locales (code, name, is_default, is_active) 
-- VALUES ('ko', 'Korean', FALSE, TRUE);
--
-- -- スペイン語
-- INSERT INTO locales (code, name, is_default, is_active) 
-- VALUES ('es', 'Spanish', FALSE, TRUE);
-- ============================================================

-- ============================================================
-- 💡 よくある操作
-- ============================================================
-- 
-- 【1】特定の言語を取得
-- SELECT * FROM locales WHERE code = 'ja';
--
-- 【2】有効な言語のみ取得
-- SELECT * FROM locales WHERE is_active = TRUE;
--
-- 【3】デフォルト言語を取得
-- SELECT * FROM locales WHERE is_default = TRUE;
--
-- 【4】言語を無効化（削除ではなく無効化）
-- UPDATE locales SET is_active = FALSE WHERE code = 'zh';
--
-- 【5】言語名を更新
-- UPDATE locales SET name = '日本語' WHERE code = 'ja';
--
-- 【6】言語を削除（通常は推奨しない）
-- DELETE FROM locales WHERE code = 'zh';
-- ※ 他のテーブルが参照している場合、削除できない
-- ============================================================

-- ============================================================
-- 💡 次のステップ
-- ============================================================
-- 1. このSQLを実行してサンプルデータを挿入
-- 2. SELECT文で確認
-- 3. Rustでこのデータを取得するコードを書く
-- 4. APIエンドポイント (GET /api/v1/locales) を実装
-- ============================================================
